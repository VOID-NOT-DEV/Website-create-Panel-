import React, { useState, useEffect } from "react"; import usersData from "../data/users.json"; import { useRouter } from "next/router";

export default function Home() { const router = useRouter(); const [username, setUsername] = useState(""); const [password, setPassword] = useState(""); const [isLoggedIn, setIsLoggedIn] = useState(false); const [userType, setUserType] = useState(null); const [nameServer, setNameServer] = useState(""); const [cpu, setCpu] = useState("1"); const [disk, setDisk] = useState("1"); const [result, setResult] = useState(null); const [createdCount, setCreatedCount] = useState(0); const [infoOpen, setInfoOpen] = useState(false); const [users, setUsers] = useState(usersData); const [newUser, setNewUser] = useState({ username: "", password: "", type: "user" });

const apikey = "ptla_nbVphesJSkjpEOL1d8nC13aSTkfpIvxbZi0FZgsIZJR"; const capikey = "ptlc_9Bz3izf1dAfC6Sihl4om6yFmvewWT3UgNNYSHU4vA3J"; const domain = "https://mypanel.public-void.nusantarahost.web.id";

const handleLogin = () => { const user = users.find( (u) => u.username === username && u.password === password ); if (user) { setIsLoggedIn(true); setUserType(user.type); } else { alert("Login failed"); } };

const handleCreate = async () => { if (!nameServer) return alert("Name server wajib diisi"); try { const url = https://pterodactyl-ten.vercel.app/create/pterov2?domain=${domain}&apikeyptero=${apikey}&capikeyptero=${capikey}&nameserver=${nameServer}&disk=${disk}&cpu=${cpu}; const res = await fetch(url); const data = await res.json(); if (data.status === true || data.success === true) setCreatedCount((prev) => prev + 1); setResult(data); } catch { setResult({ status: false, message: "Error saat membuat panel" }); } };

const handleAddUser = () => { setUsers([...users, newUser]); setNewUser({ username: "", password: "", type: "user" }); };

const handleDeleteUser = (username) => { setUsers(users.filter((user) => user.username !== username)); };

if (!isLoggedIn) { return ( <div className="min-h-screen flex flex-col justify-center items-center bg-black text-white"> <h1 className="text-2xl font-bold mb-4">Login</h1> <input type="text" placeholder="Username" value={username} onChange={(e) => setUsername(e.target.value)} className="mb-2 p-2 rounded bg-gray-800" /> <input type="password" placeholder="Password" value={password} onChange={(e) => setPassword(e.target.value)} className="mb-2 p-2 rounded bg-gray-800" /> <button onClick={handleLogin} className="bg-blue-600 px-4 py-2 rounded"> Login </button> </div> ); }

if (userType === "admin") { return ( <div className="min-h-screen p-6 bg-black text-white"> <h1 className="text-2xl font-bold mb-6">Admin Panel</h1> <div className="mb-6"> <h2 className="text-lg font-semibold mb-2">Tambah User</h2> <input type="text" placeholder="Username" value={newUser.username} onChange={(e) => setNewUser({ ...newUser, username: e.target.value })} className="mr-2 p-2 rounded bg-gray-800" /> <input type="password" placeholder="Password" value={newUser.password} onChange={(e) => setNewUser({ ...newUser, password: e.target.value })} className="mr-2 p-2 rounded bg-gray-800" /> <select value={newUser.type} onChange={(e) => setNewUser({ ...newUser, type: e.target.value })} className="mr-2 p-2 rounded bg-gray-800" > <option value="user">User</option> <option value="admin">Admin</option> </select> <button onClick={handleAddUser} className="bg-green-600 px-4 py-2 rounded"> Tambah </button> </div> <h2 className="text-lg font-semibold mb-2">Daftar User</h2> <ul> {users.map((u) => ( <li key={u.username} className="mb-2"> {u.username} - {u.type} <button onClick={() => handleDeleteUser(u.username)} className="ml-4 bg-red-600 px-2 py-1 rounded" > Hapus </button> </li> ))} </ul> <div className="mt-10"> <h2 className="text-lg font-semibold mb-4">Create Panel</h2> <input value={nameServer} onChange={(e) => setNameServer(e.target.value)} placeholder="Name Server" className="w-full mb-4 p-3 rounded bg-gray-800" /> <div className="flex gap-4 mb-4"> <select className="w-1/2 p-3 bg-gray-800 text-white rounded" value={cpu} onChange={(e) => setCpu(e.target.value)} > {[...Array(11).keys()].map((i) => ( <option key={i} value={i}> {i === 0 ? "Unlimited" : ${i} CPU} </option> ))} </select> <select className="w-1/2 p-3 bg-gray-800 text-white rounded" value={disk} onChange={(e) => setDisk(e.target.value)} > {[...Array(11).keys()].map((i) => ( <option key={i} value={i}> {i === 0 ? "Unlimited" : ${i} GB} </option> ))} </select> </div> <button
onClick={handleCreate}
className="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded text-white"
> Enter Create Panel </button> </div> {result && ( <div className="mt-6 p-4 rounded bg-gray-800"> <h3 className="font-bold text-blue-300">Hasil Create Panel</h3> <pre className="bg-black text-green-200 text-xs mt-2 p-2 rounded"> {JSON.stringify(result, null, 2)} </pre> <button onClick={() => navigator.clipboard.writeText(JSON.stringify(result))} className="text-blue-400 hover:underline mt-2" > ğŸ“‹ Copy Data </button> </div> )} </div> ); }

return ( <div className="min-h-screen p-6 bg-black text-white"> <h1 className="text-2xl font-bold mb-4">Welcome User</h1> <div className="mt-10"> <h2 className="text-lg font-semibold mb-4">Create Panel</h2> <input value={nameServer} onChange={(e) => setNameServer(e.target.value)} placeholder="Name Server" className="w-full mb-4 p-3 rounded bg-gray-800" /> <div className="flex gap-4 mb-4"> <select className="w-1/2 p-3 bg-gray-800 text-white rounded" value={cpu} onChange={(e) => setCpu(e.target.value)} > {[...Array(11).keys()].map((i) => ( <option key={i} value={i}> {i === 0 ? "Unlimited" : ${i} CPU} </option> ))} </select> <select className="w-1/2 p-3 bg-gray-800 text-white rounded" value={disk} onChange={(e) => setDisk(e.target.value)} > {[...Array(11).keys()].map((i) => ( <option key={i} value={i}> {i === 0 ? "Unlimited" : ${i} GB} </option> ))} </select> </div> <button
onClick={handleCreate}
className="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded text-white"
> Enter Create Panel </button> </div> {result && ( <div className="mt-6 p-4 rounded bg-gray-800"> <h3 className="font-bold text-blue-300">Hasil Create Panel</h3> <pre className="bg-black text-green-200 text-xs mt-2 p-2 rounded"> {JSON.stringify(result, null, 2)} </pre> <button onClick={() => navigator.clipboard.writeText(JSON.stringify(result))} className="text-blue-400 hover:underline mt-2" > ğŸ“‹ Copy Data </button> </div> )} </div> ); }

